<html>
<head>
  <title>War of the Five Kings</title>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  <style>
  body { font-family: "Open Sans"; }
  svg { border: solid black 1px; }
  .bar rect { fill: #ccc; }
  .axis path { fill: none; stroke: black;}
  .axis line { stroke: black; }
  .axis text { font-size: x-small; }
  .brush .extent {
    stroke: #fff;
    fill-opacity: .125;
    shape-rendering: crispEdges;
  }
  </style>
</head>
<body>
	<script>
		var padding = 75,
		    height  = 770,
		    width   = 700;

		var svg = d3.select("body")
   			.append("svg")
    		.attr("width", width)
    		.attr("height", height);

    var g = svg.append('g');
    var zoom_behavior = d3.behavior.zoom()
      .scaleExtent([1, 4])
      .on("zoom", zoom);

		d3.xml("westeros-map.svg", "image/svg+xml", function (error, xml) {
  			if (error) throw error;
        var importedNode = document.importNode(xml.documentElement,true);

        g.call(zoom_behavior);

        g.node().appendChild(importedNode);
    });

    function zoom () {
      var trans = d3.event.translate,
          scale = d3.event.scale;

      // Pan limiting
      if (trans[1] > 1) {
        trans[1] = 0;
      } else if (trans[1] < -height * scale + height - 1) {
        trans[1] = -height * scale + height;
      }

      zoom_behavior.translate(trans);

      g.attr("transform", "translate(" + trans + ")scale(" + scale + ")");
    }

    // 422.2 width
    // 1086.6 height
    // we have to scale the coordinates in the csv to the ones on the map. nancy coordinates are in terms of ^ that size we have to scale that to our width and height of the svg element (at least i think thats how the workflow will work)

    </script>
</body>
</html>



